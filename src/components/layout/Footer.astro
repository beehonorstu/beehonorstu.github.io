---
import { siteConfig, NAV_LINKS, ACTION_LINKS, FOOTER_LINKS } from '~/site.config';
import { Github, Facebook, Linkedin, Youtube } from 'lucide-react';
import { ui, defaultLang } from '~/i18n/ui';
import { useTranslations } from '~/i18n/utils';

const today = new Date();
const { lang = defaultLang } = Astro.params;
const t = useTranslations(lang);
---

<footer class="mt-auto border-t border-foreground/10 bg-background py-12">
  <div class="max-w-7xl mx-auto px-6">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-12">
      <div class="col-span-1 md:col-span-2 flex flex-col items-start gap-4">
        <div class="flex flex-col gap-2">
          <span class="text-xl font-bold font-display tracking-tight">{siteConfig.name}</span>
          <p class="text-sm text-muted-foreground/80 max-w-xs">
            {t['footer.quote']}
          </p>
        </div>
      </div>
      
      {Object.entries(FOOTER_LINKS).map(([key, section]) => (
        <div>
          <h3 class="font-semibold mb-4 text-foreground">{t[`footer.${key}` as keyof typeof t] || section.title}</h3>
          <ul class="space-y-2 text-sm text-foreground/90">
            {section.links.map((link: any) => {
              
              const shouldLocalize = link.localize !== false;
              const href = (!shouldLocalize)
                ? link.href 
                : `/${lang}${link.href.startsWith('/') ? '' : '/'}${link.href}`.replace(/\/$/, '') || `/${lang}`;
              
              return (
                <li>
                  <a 
                    href={href} 
                    class="hover:text-foreground transition-colors"
                    aria-label={t[`footer.${link.label.toLowerCase()}` as keyof typeof t] || link.label}
                  >
                    {t[`footer.${link.label.toLowerCase()}` as keyof typeof t] || link.label}
                  </a>
                </li>
              );
            })}
          </ul>
        </div>
      ))}
    </div>

    <div class="pt-8 border-t border-foreground/10 flex flex-col md:flex-row justify-between items-center gap-4">
      <div class="text-muted-foreground text-sm">
        {(t['footer.copyright'] || '').replace('{year}', today.getFullYear().toString())}
      </div>
      </div>
  </div>
</footer>
